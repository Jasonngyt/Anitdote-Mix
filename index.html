<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>Antidote Mix Bar</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- My Style CSS -->
    <link href="css/style.css" rel="stylesheet" type="text/css">

    <!-- Jquery -->
    <script src="js/jquery-3.4.1.min.js"></script>

    <script>
        $(document).ready(function() {

            //display popular drink on page load
            var settings = {
                "url": "https://www.thecocktaildb.com/api/json/v2/1/popular.php",
                "method": "GET",
            }

            $.ajax(settings).done(function(response) {
                let responseSummary = "";
                let responseName = [];
                let responsePhoto = [];

                for (var i = 0; i < response['drinks'].length; i++) {

                    //get the name of the cocktail
                    responseName[i] = response['drinks'][i]['strDrink'];
                    responsePhoto[i] = response['drinks'][i]['strDrinkThumb'];
                    responseSummary += "<tr> <td> <img src = " + responsePhoto[i] + " style='width:200px;height:200px'>" + "<br> <h4>" + responseName[i] + "</h4><tr>";
                }

                $("#responseSummary").html("<h2>Popular Drink</h2><br>" + responseSummary);
            });


            //display drink on search
            $("#frmSearch").submit(function(e) {
                e.preventDefault();
                let query = $("#txtQuery").val();
                findDrink(query);
            });

            function findDrink(query) {
                var settings = {
                    "url": "https://www.thecocktaildb.com/api/json/v1/1/search.php?s=" + query,
                    "method": "GET",
                }
                $.ajax(settings).done(function(response) {
                    //normal JS looping
                    let responseSummary = "";
                    let responseInstruction = [];
                    let responseName = [];
                    let responsePhoto = [];
                    let responseIngredient = [];
                    let j = 1;

                    for (var i = 0; i < response['drinks'].length; i++) {

                        //get the name of the cocktail
                        responseName[i] = response['drinks'][i]['strDrink'];

                        //get the preparation steps of the cocktail
                        responseInstruction[i] = response['drinks'][i]['strInstructions'];

                        //get the photos of the cocktail
                        responsePhoto[i] = response['drinks'][i]['strDrinkThumb'];

                        //get the ingredient of the cocktail
                        responseIngredient[i] = "";
                        j = 1;

                        while (response['drinks'][i]['strIngredient' + j] != null) {
                            responseIngredient[i] += response['drinks'][i]['strIngredient' + j] + "<br>";
                            j++;
                        }

                        //display all the information
                        responseSummary += "<tr> <td> <img src = " + responsePhoto[i] + " style='width:200px;height:200px'>" + "<br> <h4>" + responseName[i] + " </h4><td><h5>Ingredient </h5><br>" + responseIngredient[i] + "<td> <h5>Preparation </h5><br>" +
                            responseInstruction[i] + "<br>";
                        $("#responseSummary").html(responseSummary);

                    }
                });
            }
        });
    </script>

</head>

<body>
    <div class="text-center text-white">
        <h1>ANTIDOTE MIX</h1>
        <form id="frmSearch" action="">
            <label for="frmSearch"><h2>Can I have your order?</h2></label>
            <div class="row justify-content-center text-white">
                <div>
                    <input type="text" name="txtQuery" id="txtQuery" placeholder="Enter the name of the drink">
                </div>
                <div>
                    <input type="submit" id="btnSubmit" name="btnSubmit" value="Search" class="btn btn-dark">
                </div>
            </div>
        </form>
    </div>
    <div class=" container align-items-center img-thumbnail" id="responseSummary"> </div> <br>
</body>

</html>